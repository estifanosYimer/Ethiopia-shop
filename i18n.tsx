
import React, { createContext, useContext, useState, ReactNode } from 'react';
import { LanguageCode } from './types';

// Translation Dictionary
const translations: Record<string, Record<string, string>> = {
  en: {
    nav_shop: 'Shop All',
    nav_clothes: 'Clothes',
    nav_art: 'Art',
    nav_misc: 'Miscellaneous',
    nav_accessories: 'Accessories',
    hero_title: 'Timeless Ethiopian Craftsmanship',
    hero_subtitle: 'Direct from Addis Ababa to Europe',
    hero_desc: 'Explore a curated collection of handwoven Tibeb, ancient manuscripts, and artisan home decor. Verified authentic, delivered to your doorstep.',
    hero_btn: 'Explore Collection',
    discover_label: 'Discover',
    curated_collections: 'Curated Collections',
    cat_clothes_desc: 'Handwoven Tibeb & Modern Cuts',
    cat_art_desc: 'Coptic Art & Contemporary Canvas',
    cat_misc_desc: 'Coffee, Spices & Home Decor',
    shop_now: 'Shop Now',
    featured_arrivals: 'Featured Arrivals',
    featured_arrivals_sub: 'New treasures from the highlands.',
    view_all_collection: 'View All Collection',
    search_placeholder: 'Search collection...',
    search_results: 'Search results for',
    full_collection: 'Full Collection',
    items_found: 'items found',
    no_items_found: 'No items found',
    reset_search: 'Reset Search',
    sold_out: 'Sold Out',
    view_details: 'View Details',
    add_to_cart: 'Add to Cart',
    back_to_shop: 'Back to Shop',
    authentic: 'Authentic',
    heritage_craft: 'Heritage & Craft',
    global_shipping: 'Global Shipping',
    global_shipping_desc: 'Direct from Addis Ababa via Ethiopian Airlines.',
    artisan_crafted: 'Artisan Crafted',
    artisan_crafted_desc: 'Handmade by master craftsmen in Ethiopia.',
    add_to_collection: 'Add to Collection',
    out_of_stock: 'Out of Stock',
    customer_care: 'Customer Care',
    shipping_policy: 'Shipping Policy (EU)',
    authenticity_guarantee: 'Authenticity Guarantee',
    returns_exchanges: 'Returns & Exchanges',
    track_order: 'Track Your Order',
    contact: 'Contact',
    privacy_policy: 'Privacy Policy',
    terms_service: 'Terms of Service',
    rights_reserved: 'All Rights Reserved.',
    cart_title: 'Your Collection',
    checkout_btn: 'Proceed to Secure Checkout',
    checkout_title: 'Checkout',
    step_shipping: 'Shipping',
    step_payment: 'Payment',
    step_done: 'Done',
    total: 'Total',
    secure_ssl: 'Secure Checkout 256-bit SSL',
    back: 'Back',
    next: 'Next',
    form_fname: 'First Name',
    form_lname: 'Last Name',
    form_email: 'Email Address',
    form_phone: 'Phone Number',
    form_address: 'Address',
    form_city: 'City',
    form_country: 'Country',
    pay_card: 'Credit / Debit Card',
    pay_paypal: 'PayPal',
    pay_bank: 'Bank Transfer',
    card_number: 'Card Number',
    expiry: 'Expiry',
    cvc: 'CVC',
    cardholder_name: 'Cardholder Name',
    redirect_paypal: 'You will be redirected to PayPal to complete your purchase securely.',
    pay_order_btn: 'Pay Order',
    processing: 'Processing...',
    bank_transfer_intro: 'Please transfer the total amount to the following account. Your order will be shipped once funds are cleared.',
    bank_name: 'Bank Name',
    account_name: 'Account Name',
    account_number: 'IBAN',
    swift: 'Swift/BIC',
    ref_message: 'Reference Message',
    thank_you: 'Ameseginalehu!',
    thank_you_sub: 'Thank you for your order.',
    order_ref: 'Order Reference',
    return_shop: 'Return to Shop',
    policy_shipping_intro: "We partner exclusively with Ethiopian Airlines Cargo to ensure swift and secure delivery from Addis Ababa Bole International Airport directly to major European hubs.",
    policy_shipping_times_title: "Delivery Times",
    policy_shipping_express: "Express Air: 3-5 business days.",
    policy_shipping_standard: "Standard: 7-10 business days.",
    policy_shipping_customs_title: "Customs & Duties",
    policy_shipping_customs: "For customers within the European Union, we offer a DDP (Delivered Duty Paid) service.",
    policy_auth_intro: "Every item on Abyssinia Direct is verified by our on-ground curators in Addis Ababa.",
    policy_auth_promise_title: "Our Promise",
    policy_auth_handmade: "Handmade: We visit the weavers in Dorze and the potters in Jimma personally.",
    policy_auth_materials: "Materials: We guarantee the use of genuine materials.",
    policy_auth_provenance: "Provenance: Antique items come with a Certificate of Origin.",
    policy_return_intro: "We adhere to strict EU consumer protection laws.",
    policy_return_policy_title: "Policy",
    policy_return_14days: "You have 14 days from receiving your item to request a return.",
    policy_return_unused: "Items must be unused and in original packaging.",
    policy_return_hygiene: "Due to hygiene reasons, earrings and certain textiles cannot be returned if the seal is broken.",
    policy_return_process_title: "Process",
    policy_return_process: "To initiate a return, contact our support team.",
    
    // ENGLISH PRODUCT KEYS (Critical for Translation Memory Reverse Lookup)
    product_f1_name: 'Royal Habesha Kemis',
    product_f1_desc: 'Exquisite handwoven cotton dress with gold-thread Tibeb embroidery.',
    product_f2_name: 'Men’s Traditional Telet Suit',
    product_f2_desc: 'Crisp white cotton tunic and trousers with national tricolor trim.',
    product_f3_name: 'Handwoven Netela Scarf',
    product_f3_desc: 'Lightweight, gauze-like cotton scarf with colorful border.',
    product_f4_name: 'Heavy Cotton Gabi',
    product_f4_desc: 'Thick, four-layer cotton blanket wrap for cold evenings.',
    product_f5_name: 'Modern Tibeb Bomber Jacket',
    product_f5_desc: 'Urban streetwear fused with traditional weaving patterns.',
    product_f6_name: 'Wollo Raya Dress',
    product_f6_desc: 'Distinctive black and gold dress style from the Wollo region.',
    product_a1_name: 'Axumite Silver Cross Pendant',
    product_a1_desc: 'Intricate filigree silver cross inspired by the Axum empire.',
    product_a2_name: 'Lalibela Processional Cross (Replica)',
    product_a2_desc: 'Large, hand-held brass cross with complex lattice patterns.',
    product_a3_name: 'Omo Valley Beaded Necklace',
    product_a3_desc: 'Vibrant, multi-strand glass bead necklace.',
    product_a4_name: 'Addis Leather Tote',
    product_a4_desc: 'Premium Ethiopian highland sheepskin leather bag.',
    product_h1_name: 'Traditional Jebena Pot',
    product_h1_desc: 'Black clay pottery used for brewing traditional coffee.',
    product_h2_name: 'Sini Coffee Cups (Set of 6)',
    product_h2_desc: 'Small, handleless porcelain cups with traditional motifs.',
    product_h3_name: 'Harar Mesob Basket',
    product_h3_desc: 'Large, colorful woven basket table with lid.',
    product_h4_name: 'Yirgacheffe Coffee Beans (1kg)',
    product_h4_desc: 'Premium single-origin beans, floral and citrus notes.',
    product_h5_name: 'Frankincense & Myrrh Gift Set',
    product_h5_desc: 'High-grade resin incense from the Tigray region.',
    product_ar1_name: 'St. George Slaying the Dragon',
    product_ar1_desc: 'Hand-painted icon on goatskin vellum.',
    product_ar2_name: 'Solomon & Sheba Triptych',
    product_ar2_desc: 'Three-panel wooden icon telling the Kebra Nagast story.',
    product_ar3_name: 'Ethiopian Angel Heads',
    product_ar3_desc: 'Canvas painting of the famous ceiling angels of Debre Berhan Selassie.',
    product_ar4_name: 'Abstract Addis Jazz',
    product_ar4_desc: 'Contemporary acrylic painting by emerging Addis artist.'
  },
  am: {
    nav_shop: 'ሁሉንም ይግዙ',
    nav_clothes: 'ልብስ',
    nav_art: 'ጥበብ',
    nav_misc: 'የተለያዩ',
    nav_accessories: 'ጌጣጌጥ',
    hero_title: 'ጊዜ የማይሽረው የኢትዮጵያ ጥበብ',
    hero_subtitle: 'ከአዲስ አበባ በቀጥታ ወደ አውሮፓ',
    hero_desc: 'በእጅ የተሸመኑ የጥበብ ልብሶችን፣ የብራና መጽሃፍትን እና የቤት ውስጥ ማስዋቢያዎችን ያስሱ። ትክክለኝነታቸው የተረጋገጠ፣ እስከ ደጃፍዎ የሚደርስ።',
    hero_btn: 'ስብስቡን ያስሱ',
    discover_label: 'ያግኙ',
    curated_collections: 'የተመረጡ ስብስቦች',
    cat_clothes_desc: 'የእጅ ጥበብ እና ዘመናዊ ዲዛይን',
    cat_art_desc: 'የኮፕቲክ ጥበብ እና ዘመናዊ ስዕሎች',
    cat_misc_desc: 'ቡና፣ ቅመማ ቅመም እና የቤት ማስዋቢያ',
    shop_now: 'አሁን ይግዙ',
    featured_arrivals: 'አዳዲስ ገቢዎች',
    featured_arrivals_sub: 'ከደጋው የተገኙ አዳዲስ ውድ ዕቃዎች።',
    view_all_collection: 'ሁሉንም ስብስብ ይመልከቱ',
    search_placeholder: 'ስብስቡን ይፈልጉ...',
    search_results: 'የፍለጋ ውጤቶች ለ',
    full_collection: 'ሙሉ ስብስብ',
    items_found: 'ዕቃዎች ተገኝተዋል',
    no_items_found: 'ምንም ዕቃ አልተገኘም',
    reset_search: 'ፍለጋን እንደገና ጀምር',
    sold_out: 'ተሽጧል',
    view_details: 'ዝርዝሮችን ይመልከቱ',
    add_to_cart: 'ወደ ቅርጫት ጨምር',
    back_to_shop: 'ወደ ሱቅ ተመለስ',
    authentic: 'ትክክለኛ',
    heritage_craft: 'ቅርስ እና ጥበብ',
    global_shipping: 'ዓለም አቀፍ መላኪያ',
    global_shipping_desc: 'በኢትዮጵያ አየር መንገድ በቀጥታ ከአዲስ አበባ።',
    artisan_crafted: 'በእጅ የተሰራ',
    artisan_crafted_desc: 'በኢትዮጵያ ውስጥ ባሉ የጥበብ ባለሙያዎች በእጅ የተሰራ።',
    add_to_collection: 'ወደ ስብስብ ጨምር',
    out_of_stock: 'አልቋል',
    customer_care: 'የደንበኞች አገልግሎት',
    shipping_policy: 'የመላኪያ ፖሊሲ (አውሮፓ)',
    authenticity_guarantee: 'የጥራት ማረጋገጫ',
    returns_exchanges: 'መመለስ እና መለወጥ',
    track_order: 'ትዕዛዝዎን ይከታተሉ',
    contact: 'ያግኙን',
    privacy_policy: 'የግላዊነት ፖሊሲ',
    terms_service: 'የአገልግሎት ውል',
    rights_reserved: 'መብቱ በህግ የተጠበቀ ነው።',
    cart_title: 'የእርስዎ ቅርጫት',
    checkout_btn: 'ወደ ክፍያ ይሂዱ',
    checkout_title: 'ክፍያ',
    step_shipping: 'ማጓጓዣ',
    step_payment: 'ክፍያ',
    step_done: 'ተጠናቀቀ',
    total: 'ጠቅላላ',
    secure_ssl: 'ደህንነቱ የተጠበቀ ክፍያ 256-bit SSL',
    back: 'ተመለስ',
    next: 'ቀጣይ',
    form_fname: 'ስም',
    form_lname: 'የአባት ስም',
    form_email: 'ኢሜይል',
    form_phone: 'ስልክ ቁጥር',
    form_address: 'አድራሻ',
    form_city: 'ከተማ',
    form_country: 'ሀገር',
    pay_card: 'ክሬዲት / ዴቢት ካርድ',
    pay_paypal: 'PayPal',
    pay_bank: 'ባንክ ዝውውር',
    card_number: 'የካርድ ቁጥር',
    expiry: 'የሚያበቃበት ቀን',
    cvc: 'CVC',
    cardholder_name: 'የካርድ ባለቤቱ ስም',
    redirect_paypal: 'ክፍያዎን ለማጠናቀቅ ወደ PayPal ይዛወራሉ።',
    pay_order_btn: 'ክፍያ ፈጽም',
    processing: 'በማስኬድ ላይ...',
    bank_transfer_intro: 'እባክዎን ጠቅላላውን መጠን ወደሚከተለው ሂሳብ ያስተላልፉ። ገንዘቡ እንደደረሰ ትዕዛዝዎ ይላካል።',
    bank_name: 'የባንክ ስም',
    account_name: 'የሂሳብ ስም',
    account_number: 'IBAN',
    swift: 'Swift/BIC',
    ref_message: 'የማጣቀሻ መልእክት',
    thank_you: 'አመሰግናለሁ!',
    thank_you_sub: 'ትእዛዝዎ ተቀባይነት አግኝቷል።',
    order_ref: 'የትዕዛዝ ቁጥር',
    return_shop: 'ወደ ሱቅ ተመለስ',
    // Products
    product_f1_name: "ሮያል ሀበሻ ቀሚስ",
    product_f1_desc: "በወርቅ ክር ጥበብ የተጠለፈ ድንቅ የእጅ ስራ የጥጥ ቀሚስ።",
    product_f2_name: "የወንዶች ባህላዊ የጥለፍ ልብስ",
    product_f2_desc: "ነጭ የጥጥ ልብስ ከሀገራዊ ባንዲራ ቀለማት ጋር።",
    product_f3_name: "የተሸመነ ነጠላ",
    product_f3_desc: "ቀለል ያለ የጥጥ ሻርፕ ከቀለማት ያሸበረቀ ጠርዝ ጋር።",
    product_f4_name: "ወፍራም ጋቢ",
    product_f4_desc: "ለቅዝቃዜ ምሽቶች የሚሆን ወፍራም ባለ አራት ፐር የጥጥ ልብስ።",
    product_f5_name: "ዘመናዊ የጥበብ ቦምበር ጃኬት",
    product_f5_desc: "የከተማ ፋሽን ከባህላዊ የሽመና ቅጦች ጋር የተዋሃደ።",
    product_f6_name: "የወሎ ራያ ቀሚስ",
    product_f6_desc: "ከወሎ አካባቢ የመጣ ልዩ ጥቁር እና ወርቅ ቀሚስ።",
    product_a1_name: "የአክሱም የብር መስቀል",
    product_a1_desc: "ከአክሱም ስልጣኔ የተገኘ ውስብስብ የብር መስቀል።",
    product_a2_name: "የላልይበላ መስቀል (ሬፕሊካ)",
    product_a2_desc: "ትልቅ፣ በእጅ የሚይዝ የነሐስ መስቀል ከውስብስብ ንድፎች ጋር።",
    product_a3_name: "የኦሞ ሸለቆ ዶቃ የአንገት ጌጥ",
    product_a3_desc: "ደማቅ፣ ባለ ብዙ ገመድ የብርጭቆ ዶቃ የአንገት ጌጥ።",
    product_a4_name: "የአዲስ የቆዳ ቦርሳ",
    product_a4_desc: "ከፍተኛ ጥራት ያለው የኢትዮጵያ የደጋ በግ ቆዳ ቦርሳ።",
    product_h1_name: "ባህላዊ ጀበና",
    product_h1_desc: "ባህላዊ ቡና ለማፍላት የሚያገለግል ጥቁር የሸክላ ዕቃ።",
    product_h2_name: "የቡና ስኒ (የ6 ስብስብ)",
    product_h2_desc: "ትናንሽ፣ እጀታ የሌላቸው የሸክላ ስኒዎች ከባህላዊ ንድፎች ጋር።",
    product_h3_name: "የሐረር መሶብ",
    product_h3_desc: "ትልቅ፣ ያሸበረቀ የተሸመነ ቅርጫት ጠረጴዛ ከክዳን ጋር።",
    product_h4_name: "ይርጋጨፌ ቡና (1 ኪሎ)",
    product_h4_desc: "ፕሪሚየም ነጠላ-ምንጭ ቡና፣ የአበባ እና የሎሚ ጣዕም።",
    product_h5_name: "የእጣን እና ከርቤ ስጦታ ስብስብ",
    product_h5_desc: "ከትግራይ ክልል የመጣ ከፍተኛ ጥራት ያለው እጣን።",
    product_ar1_name: "ቅዱስ ጊዮርጊስ ዘንዶውን ሲገድል",
    product_ar1_desc: "በፍየል ቆዳ ላይ በእጅ የተሳለ ስዕል።",
    product_ar2_name: "የሰሎሞን እና ሳባ ታሪክ",
    product_ar2_desc: "የክብረ ነገሥትን ታሪክ የሚናገር ባለ ሶስት ክፍል የእንጨት ስዕል።",
    product_ar3_name: "የኢትዮጵያ መላእክት ራሶች",
    product_ar3_desc: "የደብረ ብርሃን ስላሴ ጣሪያ መላእክትን የሚያሳይ የሸራ ላይ ስዕል።",
    product_ar4_name: "አብስትራክት አዲስ ጃዝ",
    product_ar4_desc: "በወጣት የአዲስ አበባ ሰዓሊ የተሰራ ዘመናዊ የአክሪሊክ ስዕል።",
  },
  ti: {
    nav_shop: 'ኩሉ ዕዳጋ',
    // ... (Existing keys)
    product_f1_name: 'ሮያል ሓበሻ ቀሚስ',
    product_f1_desc: 'ብወርቂ ፈትሊ ዝተጠለፈ ብሉጽ ናይ ጡጥ ቀሚስ።',
    product_f2_name: 'ናይ ወዲ ተባዕታይ ባህላዊ ክዳን',
    product_f2_desc: 'ጻዕዳ ናይ ጡጥ ክዳን ምስ ሃገራዊ ሕብሪ ዘለዎ።',
    product_f3_name: 'ዝተኣለመ ነጸላ',
    product_f3_desc: 'ፈኩስ ናይ ጡጥ ሻርፕ ምስ ሕብሪ ዘለዎ ጫፍ።',
    product_f4_name: 'ድልዱል ጋቢ',
    product_f4_desc: 'ንዝሑል ምሽት ዝኸውን ድልዱል ናይ ጡጥ ክዳን።',
    product_f5_name: 'ዘመናዊ ጥበብ ጃኬት',
    product_f5_desc: 'ምስ ባህላዊ ኣለማ ዝተወሃሃደ ዘመናዊ ክዳን።',
    product_f6_name: 'ወሎ ራያ ቀሚስ',
    product_f6_desc: 'ካብ ከባቢ ወሎ ዝመጸ ፍሉይ ጸሊምን ወርቅን ቀሚስ።',
    // ... (Falling back to auto-translate for others if needed, but adding core prevents UI breakage)
  },
  fr: {
    nav_shop: 'Boutique',
    // ... (Existing keys)
    product_f1_name: 'Robe Royale Habesha',
    product_f1_desc: 'Robe en coton tissée à la main exquise avec broderie Tibeb en fil d\'or.',
    product_f2_name: 'Costume Traditionnel Homme',
    product_f2_desc: 'Tunique et pantalon en coton blanc impeccable avec bordure tricolore nationale.',
    product_f3_name: 'Écharpe Netela Tissée Main',
    product_f3_desc: 'Écharpe légère en coton, semblable à de la gaze, avec bordure colorée.',
    product_f4_name: 'Gabi en Coton Épais',
    product_f4_desc: 'Couverture épaisse en coton à quatre couches pour les soirées froides.',
    product_f5_name: 'Blouson Tibeb Moderne',
    product_f5_desc: 'Streetwear urbain fusionné avec des motifs de tissage traditionnels.',
    product_f6_name: 'Robe Wollo Raya',
    product_f6_desc: 'Style de robe noir et or distinctif de la région de Wollo.',
    product_a1_name: 'Pendentif Croix d\'Axoum en Argent',
    product_a1_desc: 'Croix en argent filigrané complexe inspirée de l\'empire d\'Axoum.',
    product_a2_name: 'Croix Processionnelle Lalibela (Réplique)',
    product_a2_desc: 'Grande croix en laiton tenue à la main avec des motifs en treillis complexes.',
    product_a3_name: 'Collier de Perles de la Vallée de l\'Omo',
    product_a3_desc: 'Collier de perles de verre vibrant à plusieurs rangs.',
    product_a4_name: 'Cabas en Cuir Addis',
    product_a4_desc: 'Sac en cuir de mouton des hauts plateaux éthiopiens de première qualité.',
    product_h1_name: 'Pot Jebena Traditionnel',
    product_h1_desc: 'Poterie en argile noire utilisée pour préparer le café traditionnel.',
    product_h2_name: 'Tasses à Café Sini (Set de 6)',
    product_h2_desc: 'Petites tasses en porcelaine sans anse avec motifs traditionnels.',
    product_h3_name: 'Panier Harar Mesob',
    product_h3_desc: 'Grande table en panier tressé coloré avec couvercle.',
    product_h4_name: 'Grains de Café Yirgacheffe (1kg)',
    product_h4_desc: 'Grains d\'origine unique premium, notes florales et d\'agrumes.',
    product_h5_name: 'Coffret Cadeau Encens & Myrrhe',
    product_h5_desc: 'Encens en résine de haute qualité de la région du Tigré.',
    product_ar1_name: 'Saint Georges Terrassant le Dragon',
    product_ar1_desc: 'Icône peinte à la main sur vélin de peau de chèvre.',
    product_ar2_name: 'Triptyque Salomon & Saba',
    product_ar2_desc: 'Icône en bois à trois panneaux racontant l\'histoire du Kebra Nagast.',
    product_ar3_name: 'Têtes d\'Anges Éthiopiens',
    product_ar3_desc: 'Peinture sur toile des célèbres anges du plafond de Debre Berhan Selassie.',
    product_ar4_name: 'Jazz Addis Abstrait',
    product_ar4_desc: 'Peinture acrylique contemporaine par un artiste émergent d\'Addis.'
  },
  de: {
    nav_shop: 'Shop',
    // ... (Existing keys)
    product_f1_name: 'Königliches Habesha Kemis',
    product_f1_desc: 'Exquisites handgewebtes Baumwollkleid mit Goldfaden-Tibeb-Stickerei.',
    product_f2_name: 'Traditioneller Herrenanzug',
    product_f2_desc: 'Strahlend weiße Baumwolltunika und Hose mit nationalem Trikolor-Besatz.',
    product_f3_name: 'Handgewebter Netela Schal',
    product_f3_desc: 'Leichter, gazeartiger Baumwollschal mit farbiger Bordüre.',
    product_f4_name: 'Schwerer Baumwoll-Gabi',
    product_f4_desc: 'Dicke, vierlagige Baumwolldecke für kalte Abende.',
    product_f5_name: 'Moderne Tibeb Bomberjacke',
    product_f5_desc: 'Urbane Streetwear verschmolzen mit traditionellen Webmustern.',
    product_f6_name: 'Wollo Raya Kleid',
    product_f6_desc: 'Markantes schwarz-goldenes Kleid im Stil der Wollo-Region.',
  },
  it: {
    nav_shop: 'Negozio',
    // ... (Existing keys)
    product_f1_name: 'Abito Reale Habesha',
    product_f1_desc: 'Squisito abito in cotone tessuto a mano con ricami Tibeb in filo d\'oro.',
    product_f2_name: 'Abito Tradizionale Uomo',
    product_f2_desc: 'Tunica e pantaloni in cotone bianco fresco con finiture tricolori nazionali.',
    product_f3_name: 'Sciarpa Netela Tessuta a Mano',
    product_f3_desc: 'Leggera sciarpa in cotone tipo garza con bordo colorato.',
    product_f4_name: 'Gabi in Cotone Pesante',
    product_f4_desc: 'Spessa coperta in cotone a quattro strati per le serate fredde.',
    product_f5_name: 'Bomber Tibeb Moderno',
    product_f5_desc: 'Streetwear urbano fuso con modelli di tessitura tradizionali.',
    product_f6_name: 'Abito Wollo Raya',
    product_f6_desc: 'Distintivo stile di abito nero e oro della regione di Wollo.',
  },
  nl: {
    nav_shop: 'Winkel',
    // ... (Existing keys)
    product_f1_name: 'Koninklijke Habesha Kemis',
    product_f1_desc: 'Prachtige handgeweven katoenen jurk met goudraad Tibeb borduurwerk.',
    product_f2_name: 'Traditioneel Herenpak',
    product_f2_desc: 'Fris wit katoenen tuniek en broek met nationale driekleurige bies.',
    product_f3_name: 'Handgeweven Netela Sjaal',
    product_f3_desc: 'Lichte, gaasachtige katoenen sjaal met kleurrijke rand.',
    product_f4_name: 'Zware Katoenen Gabi',
    product_f4_desc: 'Dikke, vierlaagse katoenen dekenomslag voor koude avonden.',
    product_f5_name: 'Modern Tibeb Bomberjack',
    product_f5_desc: 'Urban streetwear versmolten met traditionele weefpatronen.',
    product_f6_name: 'Wollo Raya Jurk',
    product_f6_desc: 'Opvallende zwart-gouden jurkstijl uit de regio Wollo.',
  },
  om: {
    nav_shop: 'Hunda Biti',
     // ... (Existing keys)
    product_f1_name: "Qamisii Habashaa Rojool",
    product_f1_desc: "Qamisii jirbii harkaan hojjetame kan xibebii warqiin faayame.",
    product_f2_name: "Suuudii Aadaa Dhiiraa",
    product_f2_desc: "Kootii fi surree jirbii adii qulqulluu kan faaya trikoloriin miidhagame.",
    product_f3_name: "Naaxalaa Harkaan Hojjetame",
    product_f3_desc: "Skaarfii jirbii salphaa kan daangaa halluu qabuun miidhagame.",
    product_f4_name: "Gaabii Jirbii Furdaa",
    product_f4_desc: "Uffata halkanii furdaa kan qorraa ittisuuf gargaaru.",
    product_f5_name: "Jaakeetii Tibeb Ammayyaa",
    product_f5_desc: "Uffata magaalaa kan aadaa tibebii waliin walitti makame.",
    product_f6_name: "Qamisii Walloo Raayyaa",
    product_f6_desc: "Uffata aadaa naannoo Walloo kan halluu gurraacha fi warqiin miidhagame.",
    product_a1_name: "Fannoo Fannoo Meetii Aksum",
    product_a1_desc: "Fannoo meetii walxaxaa kan mootummaa Aksum irraa madde.",
    product_a2_name: "Fannoo Lalibelaa (Replica)",
    product_a2_desc: "Fannoo naasii guddaa kan harkaan qabatamu.",
    product_a3_name: "Caffee Sulula Omoo",
    product_a3_desc: "Caffee halluu adda addaa qabu kan dubartoota Omoo.",
    product_a4_name: "Borxaa Gogaa Addis",
    product_a4_desc: "Borxaa gogaa hoolaa qulqulluu irraa hojjetame.",
    product_h1_name: "Jabanaa Aadaa",
    product_h1_desc: "Meeshaa suphee gurraacha buna danfisuuf tajaajilu.",
    product_h2_name: "Siinii Bunaa (Set 6)",
    product_h2_desc: "Siinii xixiqqoo harkaa hin qabne kan aadaan miidhagame.",
    product_h3_name: "Masobii Harar",
    product_h3_desc: "Minjaala marga irraa hojjetame kan qadaada qabu.",
    product_h4_name: "Buna Yirgaacafe (1kg)",
    product_h4_desc: "Buna qulqulluu, dhandhama abaaboo fi loomii qabu.",
    product_h5_name: "Ixaana fi Qimmaammee",
    product_h5_desc: "Ixaana qulqulluu naannoo Tigraay irraa.",
    product_ar1_name: "Qulqulluu Giyoorgis",
    product_ar1_desc: "Fakkii gogaa re'ee irratti harkaan kaafame.",
    product_ar2_name: "Solomoon fi Saabaa",
    product_ar2_desc: "Fakkii mukaa kan seenaa Kebra Nagast himu.",
    product_ar3_name: "Mataawwan Ergamootaa",
    product_ar3_desc: "Fakkii ergamoota Debre Birhan Sillaasee.",
    product_ar4_name: "Addis Jaaz",
    product_ar4_desc: "Fakkii ammayyaa kan ogeessa Addis Ababaatiin."
  }
};

interface LanguageContextType {
  language: LanguageCode;
  setLanguage: (lang: LanguageCode) => void;
  t: (key: string) => string;
  getExactTranslation: (key: string) => string | undefined;
  findBestTranslation: (text: string) => string | undefined;
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

export const LanguageProvider: React.FC<{ children: ReactNode }> = ({ children }) => {
  const [language, setLanguage] = useState<LanguageCode>('en');

  const t = (key: string) => {
    // 1. Try selected language
    if (translations[language] && translations[language][key]) {
        return translations[language][key];
    }
    // 2. Try English fallback
    if (translations['en'][key]) {
        return translations['en'][key];
    }
    // 3. Return key as last resort
    return key;
  };

  const getExactTranslation = (key: string) => {
    if (translations[language] && translations[language][key]) {
        return translations[language][key];
    }
    return undefined;
  };

  const findBestTranslation = (englishText: string): string | undefined => {
    if (!englishText) return undefined;
    const cleanText = englishText.trim();
    
    // Iterate over English keys to find a match for the content
    // This allows us to find a translation for an item even if we don't know its ID, 
    // simply by matching the English text to a known key.
    const enEntries = Object.entries(translations['en']);
    for (const [key, val] of enEntries) {
        if (val === cleanText || val.trim() === cleanText) {
            // Check if current language has this key
            const translated = translations[language]?.[key];
            if (translated) return translated;
        }
    }
    return undefined;
  };

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t, getExactTranslation, findBestTranslation }}>
      {children}
    </LanguageContext.Provider>
  );
};

export const useLanguage = () => {
  const context = useContext(LanguageContext);
  if (!context) {
    throw new Error('useLanguage must be used within a LanguageProvider');
  }
  return context;
};
